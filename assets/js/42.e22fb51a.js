(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{604:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"劝退词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#劝退词"}},[t._v("#")]),t._v(" 劝退词")]),t._v(" "),a("p",[t._v("先反思一下你们为什么要用flutter去集成unity？可不可以不用fluter去集成？如果可以的话，先放弃，用原生去集成吧，本文也不用看了，因为fluter集成实在太坑了，太降低效率了！步步坑机！如果非要用flutter去集成，或者想挑战下自己的忍耐力，那么请看下文。")]),t._v(" "),a("h3",{attrs:{id:"集成流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成流程"}},[t._v("#")]),t._v(" 集成流程")]),t._v(" "),a("p",[t._v("首先我们打开flutter项目，添加"),a("a",{attrs:{href:"https://github.com/juicycleff/flutter-unity-view-widget",target:"_blank",rel:"noopener noreferrer"}},[t._v("flutter-unity-view-weight"),a("OutboundLink")],1),t._v("依赖，我们直接在"),a("code",[t._v("pubspec.yml")]),t._v("中添加依赖:")]),t._v(" "),a("div",{staticClass:"language-dart line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  flutter_unity_widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022.1")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("如果你是flutter3.0以下，那么就添加:")]),t._v(" "),a("div",{staticClass:"language-dart line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  flutter_unity_widget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022.1")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("然后我们打开Unity，点击"),a("code",[t._v("Assets -> Import custom package")]),t._v("，然后选择上面链接中的")]),t._v(" "),a("p",[a("code",[t._v("Unity packages")]),t._v(" -> "),a("a",{attrs:{href:"https://github.com/juicycleff/flutter-unity-view-widget/blob/master/unitypackages/fuw-2022.1.1-v2.unitypackage",target:"_blank",rel:"noopener noreferrer"}},[t._v("fuw-2022.1.1-v2.unitypackage"),a("OutboundLink")],1),t._v("，我们只勾选插件部分，不需要导入demo，**如果有报错，请把unity升级2022.1.2版本。**然后我们的菜单栏就会多出一个flutter选项，我们可以直接选择flutter -> export Android 来导出unityLibrary，这个包默认是在Assets同级目录的，此时有可能报错，提示build.gradle路径不对，有两种解决方案。")]),t._v(" "),a("ul",[a("li",[t._v("1 将android项目和unity项目放在同一个目录下。")]),t._v(" "),a("li",[t._v("2 双击错误，打开对应C#脚本，然后将里面的androidProjectPath路径改为自己的android项目的路径。")])]),t._v(" "),a("p",[t._v("然后我们用AndroidStudio打开我们的flutter项目，将导出的unityLibrary作为一个module添加到项目中，此时会报错，提示有两个"),a("code",[t._v("unity.classes")]),t._v("的jar包，我们将"),a("code",[t._v("flutter-untiy-view-weight")]),t._v("中的"),a("code",[t._v("unity-classes")]),t._v("删掉，同时将该module对应的"),a("code",[t._v("build.gradle")]),t._v("文件中"),a("code",[t._v("implementation(name: 'unity-classes', ext:'jar')")]),t._v("删除，让它只依赖我们的unityLibrary。修改后的"),a("code",[t._v("build.gradle")]),t._v("文件如下:")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("implementation "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("':unityLibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("然后将"),a("strong",[t._v("unityLibrary")]),t._v("中的"),a("code",[t._v("implementation(name: 'unity-classes', ext:'jar')")]),t._v("改为: "),a("code",[t._v("api fileTree(include: ['*.jar'], dir: 'libs')")]),t._v("，同时在我们的"),a("strong",[t._v("根目录的build.gradle")]),t._v("文件中添加:")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("flatDir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dirs "),a("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("':unityLibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('/libs"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("然后运行代码即可。")]),t._v(" "),a("h3",{attrs:{id:"问题以及解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题以及解决方案"}},[t._v("#")]),t._v(" 问题以及解决方案")]),t._v(" "),a("h4",{attrs:{id:"_1-出现两个unity-classes错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-出现两个unity-classes错误"}},[t._v("#")]),t._v(" 1 出现两个unity-classes错误")]),t._v(" "),a("p",[t._v("此时我们只需要把"),a("code",[t._v("flutter-unity-view-weight")]),t._v("中的那个删除，只保留我们自己导出的"),a("code",[t._v("unityLibrary")]),t._v(" 中的"),a("code",[t._v("unity-classes")]),t._v("即可。")]),t._v(" "),a("h4",{attrs:{id:"_2-出现xxx找不到的依赖错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-出现xxx找不到的依赖错误"}},[t._v("#")]),t._v(" 2 出现xxx找不到的依赖错误")]),t._v(" "),a("p",[t._v("我们需要在项目根目录的"),a("code",[t._v("build.gradle")]),t._v("中添加:")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("flatDir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dirs "),a("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("':unityLibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectDir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('/libs"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("然后将"),a("code",[t._v("unityLibrary")]),t._v("中的"),a("code",[t._v("build.gradle")]),t._v("中的")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("`"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unity-classes'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("改为:")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("api "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileTree")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("include"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.jar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-导入fuw-2022-1-1-v2-unitypackage报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-导入fuw-2022-1-1-v2-unitypackage报错"}},[t._v("#")]),t._v(" 3 导入fuw-2022.1.1-v2.unitypackage报错")]),t._v(" "),a("ul",[a("li",[t._v("1 导入时，只勾选插件，不要勾选demo和里面的其他资源。")]),t._v(" "),a("li",[t._v("2 如果还报错，就升级unity到2022.1.1版本(也就是插件对应的版本)")])]),t._v(" "),a("h4",{attrs:{id:"_4-export-android出错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-export-android出错"}},[t._v("#")]),t._v(" 4 export Android出错")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("1 将android项目和unity项目放在同一个目录下，比如:")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("package/android // android项目\npackage/unity // unity项目\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("2 双击错误，打开报错脚本，修改里面的"),a("code",[t._v("androidProjectPath")]),t._v("路径为自己android项目的路径，默认是"),a("code",[t._v("../../android")]),t._v("。")])])]),t._v(" "),a("h4",{attrs:{id:"_5-提示ndk找不到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-提示ndk找不到"}},[t._v("#")]),t._v(" 5 提示NDK找不到")]),t._v(" "),a("p",[t._v("在local.properties文件中，配置ndk路径即可。")])])}),[],!1,null,null,null);s.default=e.exports}}]);